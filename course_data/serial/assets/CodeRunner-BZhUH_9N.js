const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-DhmPQtzo.js","assets/monaco/bundled-types-CaQuhNa9.js","assets/modules/file-saver-C8QSpN-3.js","assets/modules/vue-B9nvYz3T.js","assets/monaco/bundled-types-Cj_GtNw9.css","assets/modules/shiki-D00fEnQU.js","assets/modules/shiki-CozCpemh.css"])))=>i.map(i=>d[i]);
import{r as tt,d as xt,G as Bt,f as U,o as F,z as Rt,U as Ut,P as kt,aN as jt,S as Gt,D as Xt,ag as Yt,ah as qt,i as yt,am as Ht,g as At,t as dt,X as J,F as it,aj as St,b as Vt,n as zt,H as Wt,k as $t,e as Qt,w as Jt}from"./modules/vue-B9nvYz3T.js";import{l as bt,n as Kt,_ as Dt,k as Zt,o as pt}from"./monaco/bundled-types-CaQuhNa9.js";import{a as te,a5 as ee}from"./index-DZXCi8Z6.js";import{u as ne}from"./slidev/context-xEvq-YsN.js";import{_ as ie}from"./slidev/IconButton.vue_vue_type_script_setup_true_lang-Yr1BM_Bo.js";import"./modules/file-saver-C8QSpN-3.js";import"./modules/shiki-D00fEnQU.js";var ht={},mt={},st={exports:{}},Nt;function re(){return Nt||(Nt=1,(function(a,n){var i=bt,r=i.Buffer;function d(l,p){for(var c in l)p[c]=l[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?a.exports=i:(d(i,n),n.Buffer=m);function m(l,p,c){return r(l,p,c)}d(r,m),m.from=function(l,p,c){if(typeof l=="number")throw new TypeError("Argument must not be a number");return r(l,p,c)},m.alloc=function(l,p,c){if(typeof l!="number")throw new TypeError("Argument must be a number");var E=r(l);return p!==void 0?typeof c=="string"?E.fill(p,c):E.fill(p):E.fill(0),E},m.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r(l)},m.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(l)}})(st,st.exports)),st.exports}var vt;function oe(){if(vt)return mt;vt=1;var a=re().Buffer,n=a.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(u){if(!u)return"utf8";for(var h;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(h)return;u=(""+u).toLowerCase(),h=!0}}function r(u){var h=i(u);if(typeof h!="string"&&(a.isEncoding===n||!n(u)))throw new Error("Unknown encoding: "+u);return h||u}mt.StringDecoder=d;function d(u){this.encoding=r(u);var h;switch(this.encoding){case"utf16le":this.text=S,this.end=g,h=4;break;case"utf8":this.fillLast=c,h=4;break;case"base64":this.text=B,this.end=k,h=3;break;default:this.write=H,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(h)}d.prototype.write=function(u){if(u.length===0)return"";var h,y;if(this.lastNeed){if(h=this.fillLast(u),h===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<u.length?h?h+this.text(u,y):this.text(u,y):h||""},d.prototype.end=T,d.prototype.text=E,d.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function m(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function l(u,h,y){var A=h.length-1;if(A<y)return 0;var _=m(h[A]);return _>=0?(_>0&&(u.lastNeed=_-1),_):--A<y||_===-2?0:(_=m(h[A]),_>=0?(_>0&&(u.lastNeed=_-2),_):--A<y||_===-2?0:(_=m(h[A]),_>=0?(_>0&&(_===2?_=0:u.lastNeed=_-3),_):0))}function p(u,h,y){if((h[0]&192)!==128)return u.lastNeed=0,"�";if(u.lastNeed>1&&h.length>1){if((h[1]&192)!==128)return u.lastNeed=1,"�";if(u.lastNeed>2&&h.length>2&&(h[2]&192)!==128)return u.lastNeed=2,"�"}}function c(u){var h=this.lastTotal-this.lastNeed,y=p(this,u);if(y!==void 0)return y;if(this.lastNeed<=u.length)return u.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,h,0,u.length),this.lastNeed-=u.length}function E(u,h){var y=l(this,u,h);if(!this.lastNeed)return u.toString("utf8",h);this.lastTotal=y;var A=u.length-(y-this.lastNeed);return u.copy(this.lastChar,0,A),u.toString("utf8",h,A)}function T(u){var h=u&&u.length?this.write(u):"";return this.lastNeed?h+"�":h}function S(u,h){if((u.length-h)%2===0){var y=u.toString("utf16le",h);if(y){var A=y.charCodeAt(y.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",h,u.length-1)}function g(u){var h=u&&u.length?this.write(u):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,y)}return h}function B(u,h){var y=(u.length-h)%3;return y===0?u.toString("base64",h):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",h,u.length-y))}function k(u){var h=u&&u.length?this.write(u):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function H(u){return u.toString(this.encoding)}function v(u){return u&&u.length?this.write(u):""}return mt}var Ct;function se(){return Ct||(Ct=1,(function(a){(function(n){n.parser=function(e,t){return new r(e,t)},n.SAXParser=r,n.SAXStream=T,n.createStream=E,n.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(e,t){if(!(this instanceof r))return new r(e,t);var f=this;m(f),f.q=f.c="",f.bufferCheckPosition=n.MAX_BUFFER_LENGTH,f.opt=t||{},f.opt.lowercase=f.opt.lowercase||f.opt.lowercasetags,f.looseCase=f.opt.lowercase?"toLowerCase":"toUpperCase",f.tags=[],f.closed=f.closedRoot=f.sawRoot=!1,f.tag=f.error=null,f.strict=!!e,f.noscript=!!(e||f.opt.noscript),f.state=s.BEGIN,f.strictEntities=f.opt.strictEntities,f.ENTITIES=f.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),f.attribList=[],f.opt.xmlns&&(f.ns=Object.create(H)),f.opt.unquotedAttributeValues===void 0&&(f.opt.unquotedAttributeValues=!e),f.trackPosition=f.opt.position!==!1,f.trackPosition&&(f.position=f.line=f.column=0),z(f,"onready")}Object.create||(Object.create=function(e){function t(){}t.prototype=e;var f=new t;return f}),Object.keys||(Object.keys=function(e){var t=[];for(var f in e)e.hasOwnProperty(f)&&t.push(f);return t});function d(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),f=0,o=0,I=i.length;o<I;o++){var D=e[i[o]].length;if(D>t)switch(i[o]){case"textNode":W(e);break;case"cdata":x(e,"oncdata",e.cdata),e.cdata="";break;case"script":x(e,"onscript",e.script),e.script="";break;default:q(e,"Max buffer length exceeded: "+i[o])}f=Math.max(f,D)}var L=n.MAX_BUFFER_LENGTH-f;e.bufferCheckPosition=L+e.position}function m(e){for(var t=0,f=i.length;t<f;t++)e[i[t]]=""}function l(e){W(e),e.cdata!==""&&(x(e,"oncdata",e.cdata),e.cdata=""),e.script!==""&&(x(e,"onscript",e.script),e.script="")}r.prototype={end:function(){O(this)},write:Ft,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){l(this)}};var p;try{p=bt.Stream}catch{p=function(){}}p||(p=function(){});var c=n.EVENTS.filter(function(e){return e!=="error"&&e!=="end"});function E(e,t){return new T(e,t)}function T(e,t){if(!(this instanceof T))return new T(e,t);p.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var f=this;this._parser.onend=function(){f.emit("end")},this._parser.onerror=function(o){f.emit("error",o),f._parser.error=null},this._decoder=null,c.forEach(function(o){Object.defineProperty(f,"on"+o,{get:function(){return f._parser["on"+o]},set:function(I){if(!I)return f.removeAllListeners(o),f._parser["on"+o]=I,I;f.on(o,I)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(p.prototype,{constructor:{value:T}}),T.prototype.write=function(e){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(e)){if(!this._decoder){var t=oe().StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},T.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},T.prototype.on=function(e,t){var f=this;return!f._parser["on"+e]&&c.indexOf(e)!==-1&&(f._parser["on"+e]=function(){var o=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);o.splice(0,0,e),f.emit.apply(f,o)}),p.prototype.on.call(f,e,t)};var S="[CDATA[",g="DOCTYPE",B="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/2000/xmlns/",H={xml:B,xmlns:k},v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function A(e){return e===" "||e===`
`||e==="\r"||e==="	"}function _(e){return e==='"'||e==="'"}function P(e){return e===">"||A(e)}function M(e,t){return e.test(t)}function b(e,t){return!M(e,t)}var s=0;n.STATE={BEGIN:s++,BEGIN_WHITESPACE:s++,TEXT:s++,TEXT_ENTITY:s++,OPEN_WAKA:s++,SGML_DECL:s++,SGML_DECL_QUOTED:s++,DOCTYPE:s++,DOCTYPE_QUOTED:s++,DOCTYPE_DTD:s++,DOCTYPE_DTD_QUOTED:s++,COMMENT_STARTING:s++,COMMENT:s++,COMMENT_ENDING:s++,COMMENT_ENDED:s++,CDATA:s++,CDATA_ENDING:s++,CDATA_ENDING_2:s++,PROC_INST:s++,PROC_INST_BODY:s++,PROC_INST_ENDING:s++,OPEN_TAG:s++,OPEN_TAG_SLASH:s++,ATTRIB:s++,ATTRIB_NAME:s++,ATTRIB_NAME_SAW_WHITE:s++,ATTRIB_VALUE:s++,ATTRIB_VALUE_QUOTED:s++,ATTRIB_VALUE_CLOSED:s++,ATTRIB_VALUE_UNQUOTED:s++,ATTRIB_VALUE_ENTITY_Q:s++,ATTRIB_VALUE_ENTITY_U:s++,CLOSE_TAG:s++,CLOSE_TAG_SAW_WHITE:s++,SCRIPT:s++,SCRIPT_ENDING:s++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],f=typeof t=="number"?String.fromCharCode(t):t;n.ENTITIES[e]=f});for(var et in n.STATE)n.STATE[n.STATE[et]]=et;s=n.STATE;function z(e,t,f){e[t]&&e[t](f)}function x(e,t,f){e.textNode&&W(e),z(e,t,f)}function W(e){e.textNode=nt(e.opt,e.textNode),e.textNode&&z(e,"ontext",e.textNode),e.textNode=""}function nt(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function q(e,t){return W(e),e.trackPosition&&(t+=`
Line: `+e.line+`
Column: `+e.column+`
Char: `+e.c),t=new Error(t),e.error=t,z(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&C(e,"Unclosed root tag"),e.state!==s.BEGIN&&e.state!==s.BEGIN_WHITESPACE&&e.state!==s.TEXT&&q(e,"Unexpected end"),W(e),e.c="",e.closed=!0,z(e,"onend"),r.call(e,e.strict,e.opt),e}function C(e,t){if(typeof e!="object"||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&q(e,t)}function Pt(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,f=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(f.ns=t.ns),e.attribList.length=0,x(e,"onopentagstart",f)}function ut(e,t){var f=e.indexOf(":"),o=f<0?["",e]:e.split(":"),I=o[0],D=o[1];return t&&e==="xmlns"&&(I="xmlns",D=""),{prefix:I,local:D}}function ct(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),e.attribList.indexOf(e.attribName)!==-1||e.tag.attributes.hasOwnProperty(e.attribName)){e.attribName=e.attribValue="";return}if(e.opt.xmlns){var t=ut(e.attribName,!0),f=t.prefix,o=t.local;if(f==="xmlns")if(o==="xml"&&e.attribValue!==B)C(e,"xml: prefix must be bound to "+B+`
Actual: `+e.attribValue);else if(o==="xmlns"&&e.attribValue!==k)C(e,"xmlns: prefix must be bound to "+k+`
Actual: `+e.attribValue);else{var I=e.tag,D=e.tags[e.tags.length-1]||e;I.ns===D.ns&&(I.ns=Object.create(D.ns)),I.ns[o]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,x(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function $(e,t){if(e.opt.xmlns){var f=e.tag,o=ut(e.tagName);f.prefix=o.prefix,f.local=o.local,f.uri=f.ns[o.prefix]||"",f.prefix&&!f.uri&&(C(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),f.uri=o.prefix);var I=e.tags[e.tags.length-1]||e;f.ns&&I.ns!==f.ns&&Object.keys(f.ns).forEach(function(_t){x(e,"onopennamespace",{prefix:_t,uri:f.ns[_t]})});for(var D=0,L=e.attribList.length;D<L;D++){var j=e.attribList[D],G=j[0],Q=j[1],R=ut(G,!0),V=R.prefix,wt=R.local,Et=V===""?"":f.ns[V]||"",lt={name:G,value:Q,prefix:V,local:wt,uri:Et};V&&V!=="xmlns"&&!Et&&(C(e,"Unbound namespace prefix: "+JSON.stringify(V)),lt.uri=V),e.tag.attributes[G]=lt,x(e,"onattribute",lt)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),x(e,"onopentag",e.tag),t||(!e.noscript&&e.tagName.toLowerCase()==="script"?e.state=s.SCRIPT:e.state=s.TEXT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function ft(e){if(!e.tagName){C(e,"Weird empty close tag."),e.textNode+="</>",e.state=s.TEXT;return}if(e.script){if(e.tagName!=="script"){e.script+="</"+e.tagName+">",e.tagName="",e.state=s.SCRIPT;return}x(e,"onscript",e.script),e.script=""}var t=e.tags.length,f=e.tagName;e.strict||(f=f[e.looseCase]());for(var o=f;t--;){var I=e.tags[t];if(I.name!==o)C(e,"Unexpected close tag");else break}if(t<0){C(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",e.state=s.TEXT;return}e.tagName=f;for(var D=e.tags.length;D-- >t;){var L=e.tag=e.tags.pop();e.tagName=e.tag.name,x(e,"onclosetag",e.tagName);var j={};for(var G in L.ns)j[G]=L.ns[G];var Q=e.tags[e.tags.length-1]||e;e.opt.xmlns&&L.ns!==Q.ns&&Object.keys(L.ns).forEach(function(R){var V=L.ns[R];x(e,"onclosenamespace",{prefix:R,uri:V})})}t===0&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=s.TEXT}function Mt(e){var t=e.entity,f=t.toLowerCase(),o,I="";return e.ENTITIES[t]?e.ENTITIES[t]:e.ENTITIES[f]?e.ENTITIES[f]:(t=f,t.charAt(0)==="#"&&(t.charAt(1)==="x"?(t=t.slice(2),o=parseInt(t,16),I=o.toString(16)):(t=t.slice(1),o=parseInt(t,10),I=o.toString(10))),t=t.replace(/^0+/,""),isNaN(o)||I.toLowerCase()!==t?(C(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(o))}function Tt(e,t){t==="<"?(e.state=s.OPEN_WAKA,e.startTagPosition=e.position):A(t)||(C(e,"Non-whitespace before first tag."),e.textNode=t,e.state=s.TEXT)}function gt(e,t){var f="";return t<e.length&&(f=e.charAt(t)),f}function Ft(e){var t=this;if(this.error)throw this.error;if(t.closed)return q(t,"Cannot write after close. Assign an onready handler.");if(e===null)return O(t);typeof e=="object"&&(e=e.toString());for(var f=0,o="";o=gt(e,f++),t.c=o,!!o;)switch(t.trackPosition&&(t.position++,o===`
`?(t.line++,t.column=0):t.column++),t.state){case s.BEGIN:if(t.state=s.BEGIN_WHITESPACE,o==="\uFEFF")continue;Tt(t,o);continue;case s.BEGIN_WHITESPACE:Tt(t,o);continue;case s.TEXT:if(t.sawRoot&&!t.closedRoot){for(var I=f-1;o&&o!=="<"&&o!=="&";)o=gt(e,f++),o&&t.trackPosition&&(t.position++,o===`
`?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(I,f-1)}o==="<"&&!(t.sawRoot&&t.closedRoot&&!t.strict)?(t.state=s.OPEN_WAKA,t.startTagPosition=t.position):(!A(o)&&(!t.sawRoot||t.closedRoot)&&C(t,"Text data outside of root node."),o==="&"?t.state=s.TEXT_ENTITY:t.textNode+=o);continue;case s.SCRIPT:o==="<"?t.state=s.SCRIPT_ENDING:t.script+=o;continue;case s.SCRIPT_ENDING:o==="/"?t.state=s.CLOSE_TAG:(t.script+="<"+o,t.state=s.SCRIPT);continue;case s.OPEN_WAKA:if(o==="!")t.state=s.SGML_DECL,t.sgmlDecl="";else if(!A(o))if(M(v,o))t.state=s.OPEN_TAG,t.tagName=o;else if(o==="/")t.state=s.CLOSE_TAG,t.tagName="";else if(o==="?")t.state=s.PROC_INST,t.procInstName=t.procInstBody="";else{if(C(t,"Unencoded <"),t.startTagPosition+1<t.position){var D=t.position-t.startTagPosition;o=new Array(D).join(" ")+o}t.textNode+="<"+o,t.state=s.TEXT}continue;case s.SGML_DECL:if(t.sgmlDecl+o==="--"){t.state=s.COMMENT,t.comment="",t.sgmlDecl="";continue}t.doctype&&t.doctype!==!0&&t.sgmlDecl?(t.state=s.DOCTYPE_DTD,t.doctype+="<!"+t.sgmlDecl+o,t.sgmlDecl=""):(t.sgmlDecl+o).toUpperCase()===S?(x(t,"onopencdata"),t.state=s.CDATA,t.sgmlDecl="",t.cdata=""):(t.sgmlDecl+o).toUpperCase()===g?(t.state=s.DOCTYPE,(t.doctype||t.sawRoot)&&C(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):o===">"?(x(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=s.TEXT):(_(o)&&(t.state=s.SGML_DECL_QUOTED),t.sgmlDecl+=o);continue;case s.SGML_DECL_QUOTED:o===t.q&&(t.state=s.SGML_DECL,t.q=""),t.sgmlDecl+=o;continue;case s.DOCTYPE:o===">"?(t.state=s.TEXT,x(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=o,o==="["?t.state=s.DOCTYPE_DTD:_(o)&&(t.state=s.DOCTYPE_QUOTED,t.q=o));continue;case s.DOCTYPE_QUOTED:t.doctype+=o,o===t.q&&(t.q="",t.state=s.DOCTYPE);continue;case s.DOCTYPE_DTD:o==="]"?(t.doctype+=o,t.state=s.DOCTYPE):o==="<"?(t.state=s.OPEN_WAKA,t.startTagPosition=t.position):_(o)?(t.doctype+=o,t.state=s.DOCTYPE_DTD_QUOTED,t.q=o):t.doctype+=o;continue;case s.DOCTYPE_DTD_QUOTED:t.doctype+=o,o===t.q&&(t.state=s.DOCTYPE_DTD,t.q="");continue;case s.COMMENT:o==="-"?t.state=s.COMMENT_ENDING:t.comment+=o;continue;case s.COMMENT_ENDING:o==="-"?(t.state=s.COMMENT_ENDED,t.comment=nt(t.opt,t.comment),t.comment&&x(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+o,t.state=s.COMMENT);continue;case s.COMMENT_ENDED:o!==">"?(C(t,"Malformed comment"),t.comment+="--"+o,t.state=s.COMMENT):t.doctype&&t.doctype!==!0?t.state=s.DOCTYPE_DTD:t.state=s.TEXT;continue;case s.CDATA:o==="]"?t.state=s.CDATA_ENDING:t.cdata+=o;continue;case s.CDATA_ENDING:o==="]"?t.state=s.CDATA_ENDING_2:(t.cdata+="]"+o,t.state=s.CDATA);continue;case s.CDATA_ENDING_2:o===">"?(t.cdata&&x(t,"oncdata",t.cdata),x(t,"onclosecdata"),t.cdata="",t.state=s.TEXT):o==="]"?t.cdata+="]":(t.cdata+="]]"+o,t.state=s.CDATA);continue;case s.PROC_INST:o==="?"?t.state=s.PROC_INST_ENDING:A(o)?t.state=s.PROC_INST_BODY:t.procInstName+=o;continue;case s.PROC_INST_BODY:if(!t.procInstBody&&A(o))continue;o==="?"?t.state=s.PROC_INST_ENDING:t.procInstBody+=o;continue;case s.PROC_INST_ENDING:o===">"?(x(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=s.TEXT):(t.procInstBody+="?"+o,t.state=s.PROC_INST_BODY);continue;case s.OPEN_TAG:M(u,o)?t.tagName+=o:(Pt(t),o===">"?$(t):o==="/"?t.state=s.OPEN_TAG_SLASH:(A(o)||C(t,"Invalid character in tag name"),t.state=s.ATTRIB));continue;case s.OPEN_TAG_SLASH:o===">"?($(t,!0),ft(t)):(C(t,"Forward-slash in opening tag not followed by >"),t.state=s.ATTRIB);continue;case s.ATTRIB:if(A(o))continue;o===">"?$(t):o==="/"?t.state=s.OPEN_TAG_SLASH:M(v,o)?(t.attribName=o,t.attribValue="",t.state=s.ATTRIB_NAME):C(t,"Invalid attribute name");continue;case s.ATTRIB_NAME:o==="="?t.state=s.ATTRIB_VALUE:o===">"?(C(t,"Attribute without value"),t.attribValue=t.attribName,ct(t),$(t)):A(o)?t.state=s.ATTRIB_NAME_SAW_WHITE:M(u,o)?t.attribName+=o:C(t,"Invalid attribute name");continue;case s.ATTRIB_NAME_SAW_WHITE:if(o==="=")t.state=s.ATTRIB_VALUE;else{if(A(o))continue;C(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",x(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",o===">"?$(t):M(v,o)?(t.attribName=o,t.state=s.ATTRIB_NAME):(C(t,"Invalid attribute name"),t.state=s.ATTRIB)}continue;case s.ATTRIB_VALUE:if(A(o))continue;_(o)?(t.q=o,t.state=s.ATTRIB_VALUE_QUOTED):(t.opt.unquotedAttributeValues||q(t,"Unquoted attribute value"),t.state=s.ATTRIB_VALUE_UNQUOTED,t.attribValue=o);continue;case s.ATTRIB_VALUE_QUOTED:if(o!==t.q){o==="&"?t.state=s.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=o;continue}ct(t),t.q="",t.state=s.ATTRIB_VALUE_CLOSED;continue;case s.ATTRIB_VALUE_CLOSED:A(o)?t.state=s.ATTRIB:o===">"?$(t):o==="/"?t.state=s.OPEN_TAG_SLASH:M(v,o)?(C(t,"No whitespace between attributes"),t.attribName=o,t.attribValue="",t.state=s.ATTRIB_NAME):C(t,"Invalid attribute name");continue;case s.ATTRIB_VALUE_UNQUOTED:if(!P(o)){o==="&"?t.state=s.ATTRIB_VALUE_ENTITY_U:t.attribValue+=o;continue}ct(t),o===">"?$(t):t.state=s.ATTRIB;continue;case s.CLOSE_TAG:if(t.tagName)o===">"?ft(t):M(u,o)?t.tagName+=o:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=s.SCRIPT):(A(o)||C(t,"Invalid tagname in closing tag"),t.state=s.CLOSE_TAG_SAW_WHITE);else{if(A(o))continue;b(v,o)?t.script?(t.script+="</"+o,t.state=s.SCRIPT):C(t,"Invalid tagname in closing tag."):t.tagName=o}continue;case s.CLOSE_TAG_SAW_WHITE:if(A(o))continue;o===">"?ft(t):C(t,"Invalid characters in closing tag");continue;case s.TEXT_ENTITY:case s.ATTRIB_VALUE_ENTITY_Q:case s.ATTRIB_VALUE_ENTITY_U:var L,j;switch(t.state){case s.TEXT_ENTITY:L=s.TEXT,j="textNode";break;case s.ATTRIB_VALUE_ENTITY_Q:L=s.ATTRIB_VALUE_QUOTED,j="attribValue";break;case s.ATTRIB_VALUE_ENTITY_U:L=s.ATTRIB_VALUE_UNQUOTED,j="attribValue";break}if(o===";"){var G=Mt(t);t.opt.unparsedEntities&&!Object.values(n.XML_ENTITIES).includes(G)?(t.entity="",t.state=L,t.write(G)):(t[j]+=G,t.entity="",t.state=L)}else M(t.entity.length?y:h,o)?t.entity+=o:(C(t,"Invalid character in entity name"),t[j]+="&"+t.entity+o,t.entity="",t.state=L);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&d(t),t}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var e=String.fromCharCode,t=Math.floor,f=function(){var o=16384,I=[],D,L,j=-1,G=arguments.length;if(!G)return"";for(var Q="";++j<G;){var R=Number(arguments[j]);if(!isFinite(R)||R<0||R>1114111||t(R)!==R)throw RangeError("Invalid code point: "+R);R<=65535?I.push(R):(R-=65536,D=(R>>10)+55296,L=R%1024+56320,I.push(D,L)),(j+1===G||I.length>o)&&(Q+=e.apply(null,I),I.length=0)}return Q};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:f,configurable:!0,writable:!0}):String.fromCodePoint=f})()})(a)})(ht)),ht}var ae=se();const ue={firstName:"Иван",lastName:"Иванов",address:{streetAddress:"Московское ш., 101, кв.101",city:"Ленинград",postalCode:101101},phoneNumbers:["812 123-1234","916 123-4567"]};class Lt{constructor(n,i){this.firstname=n,this.surname=i}get fullname(){return`${this.firstname} ${this.surname}`}}class ce{constructor(n,i=[]){this.name=n,this.students=i}}const fe=new Lt("Александр","Пушкин"),le=`<bookstore>
  <book category="fiction">
    <title lang="en">Harry Potter</title>
    <author>J.K. Rowling</author>
    <price>29.99</price>
  </book>
  <book category="cooking">
    <title lang="en">Everyday Italian</title>
    <author>Giada De Laurentiis</author>
    <price>30.00</price>
  </book>
  <book category="fiction">
    <title lang="ru">Война и мир</title>
    <author>Лев Толстой</author>
    <price discount="10%">25.50</price>
  </book>
</bookstore>`;function de(a){let n="",i=a.iterateNext();for(;i;)n+=new XMLSerializer().serializeToString(i)+`
`,i=a.iterateNext();return n}class pe{constructor(){this.results=[],this.currentPath=[],this.inFictionBook=!1,this.currentTitle={},this.parser=ae.parser(!0,{trim:!0,lowercase:!0}),this.setupEventHandlers()}setupEventHandlers(){this.parser.onopentag=n=>{this.currentPath.push(n.name),n.name==="book"?this.inFictionBook=n.attributes.category==="fiction":n.name==="title"&&this.inFictionBook&&(this.currentTitle={category:"fiction",lang:n.attributes.lang||""})},this.parser.ontext=n=>{this.currentPath[this.currentPath.length-1]==="title"&&this.inFictionBook&&n.trim()&&(this.currentTitle.text=n.trim())},this.parser.onclosetag=n=>{this.currentPath.pop(),n==="book"?this.inFictionBook=!1:n==="title"&&this.inFictionBook&&this.currentTitle.text&&(this.results.push(this.currentTitle),this.currentTitle={})},this.parser.onerror=n=>{console.error("Parsing error:",n)},this.parser.onend=()=>{console.log("Parsing completed successfully")}}parse(n){return new Promise((i,r)=>{this.parser.onend=()=>i(this.results),this.parser.onerror=r;try{this.parser.write(n).close()}catch(d){r(d)}})}}const he=Object.freeze(Object.defineProperty({__proto__:null,Lesson:ce,Student:Lt,XPathSaxParser:pe,bookstore:le,ivanov:ue,print_xpath_result:de,pushkin:fe},Symbol.toStringTag,{value:"Module"}));var N;(function(a){a[a.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",a[a.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",a[a.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(N||(N={}));var me=(function(){function a(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return a.prototype.addTypeMetadata=function(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)},a.prototype.addTransformMetadata=function(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)},a.prototype.addExposeMetadata=function(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)},a.prototype.addExcludeMetadata=function(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)},a.prototype.findTransformMetadatas=function(n,i,r){return this.findMetadatas(this._transformMetadatas,n,i).filter(function(d){return!d.options||d.options.toClassOnly===!0&&d.options.toPlainOnly===!0?!0:d.options.toClassOnly===!0?r===N.CLASS_TO_CLASS||r===N.PLAIN_TO_CLASS:d.options.toPlainOnly===!0?r===N.CLASS_TO_PLAIN:!0})},a.prototype.findExcludeMetadata=function(n,i){return this.findMetadata(this._excludeMetadatas,n,i)},a.prototype.findExposeMetadata=function(n,i){return this.findMetadata(this._exposeMetadatas,n,i)},a.prototype.findExposeMetadataByCustomName=function(n,i){return this.getExposedMetadatas(n).find(function(r){return r.options&&r.options.name===i})},a.prototype.findTypeMetadata=function(n,i){return this.findMetadata(this._typeMetadatas,n,i)},a.prototype.getStrategy=function(n){var i=this._excludeMetadatas.get(n),r=i&&i.get(void 0),d=this._exposeMetadatas.get(n),m=d&&d.get(void 0);return r&&m||!r&&!m?"none":r?"excludeAll":"exposeAll"},a.prototype.getExposedMetadatas=function(n){return this.getMetadata(this._exposeMetadatas,n)},a.prototype.getExcludedMetadatas=function(n){return this.getMetadata(this._excludeMetadatas,n)},a.prototype.getExposedProperties=function(n,i){return this.getExposedMetadatas(n).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?i===N.CLASS_TO_CLASS||i===N.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?i===N.CLASS_TO_PLAIN:!0}).map(function(r){return r.propertyName})},a.prototype.getExcludedProperties=function(n,i){return this.getExcludedMetadatas(n).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?i===N.CLASS_TO_CLASS||i===N.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?i===N.CLASS_TO_PLAIN:!0}).map(function(r){return r.propertyName})},a.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},a.prototype.getMetadata=function(n,i){var r=n.get(i),d;r&&(d=Array.from(r.values()).filter(function(S){return S.propertyName!==void 0}));for(var m=[],l=0,p=this.getAncestors(i);l<p.length;l++){var c=p[l],E=n.get(c);if(E){var T=Array.from(E.values()).filter(function(S){return S.propertyName!==void 0});m.push.apply(m,T)}}return m.concat(d||[])},a.prototype.findMetadata=function(n,i,r){var d=n.get(i);if(d){var m=d.get(r);if(m)return m}for(var l=0,p=this.getAncestors(i);l<p.length;l++){var c=p[l],E=n.get(c);if(E){var T=E.get(r);if(T)return T}}},a.prototype.findMetadatas=function(n,i,r){var d=n.get(i),m;d&&(m=d.get(r));for(var l=[],p=0,c=this.getAncestors(i);p<c.length;p++){var E=c[p],T=n.get(E);T&&T.has(r)&&l.push.apply(l,T.get(r))}return l.slice().reverse().concat((m||[]).slice().reverse())},a.prototype.getAncestors=function(n){if(!n)return[];if(!this._ancestorsMap.has(n)){for(var i=[],r=Object.getPrototypeOf(n.prototype.constructor);typeof r.prototype<"u";r=Object.getPrototypeOf(r.prototype.constructor))i.push(r);this._ancestorsMap.set(n,i)}return this._ancestorsMap.get(n)},a})(),w=new me;function Te(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function ge(a){return a!==null&&typeof a=="object"&&typeof a.then=="function"}var It=function(a,n,i){if(i||arguments.length===2)for(var r=0,d=n.length,m;r<d;r++)(m||!(r in n))&&(m||(m=Array.prototype.slice.call(n,0,r)),m[r]=n[r]);return a.concat(m||Array.prototype.slice.call(n))};function Ee(a){var n=new a;return!(n instanceof Set)&&!("push"in n)?[]:n}var K=(function(){function a(n,i){this.transformationType=n,this.options=i,this.recursionStack=new Set}return a.prototype.transform=function(n,i,r,d,m,l){var p=this;if(l===void 0&&(l=0),Array.isArray(i)||i instanceof Set){var c=d&&this.transformationType===N.PLAIN_TO_CLASS?Ee(d):[];return i.forEach(function(v,u){var h=n?n[u]:void 0;if(!p.options.enableCircularCheck||!p.isCircular(v)){var y=void 0;if(typeof r!="function"&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(p.transformationType===N.PLAIN_TO_CLASS){y=r.options.discriminator.subTypes.find(function(M){return M.name===v[r.options.discriminator.property]});var A={newObject:c,object:v,property:void 0},_=r.typeFunction(A);y===void 0?y=_:y=y.value,r.options.keepDiscriminatorProperty||delete v[r.options.discriminator.property]}p.transformationType===N.CLASS_TO_CLASS&&(y=v.constructor),p.transformationType===N.CLASS_TO_PLAIN&&(v[r.options.discriminator.property]=r.options.discriminator.subTypes.find(function(M){return M.value===v.constructor}).name)}else y=r;var P=p.transform(h,v,y,void 0,v instanceof Map,l+1);c instanceof Set?c.add(P):c.push(P)}else p.transformationType===N.CLASS_TO_CLASS&&(c instanceof Set?c.add(v):c.push(v))}),c}else{if(r===String&&!m)return i==null?i:String(i);if(r===Number&&!m)return i==null?i:Number(i);if(r===Boolean&&!m)return i==null?i:!!i;if((r===Date||i instanceof Date)&&!m)return i instanceof Date?new Date(i.valueOf()):i==null?i:new Date(i);if(Te().Buffer&&(r===Buffer||i instanceof Buffer)&&!m)return i==null?i:Buffer.from(i);if(ge(i)&&!m)return new Promise(function(v,u){i.then(function(h){return v(p.transform(void 0,h,r,void 0,void 0,l+1))},u)});if(!m&&i!==null&&typeof i=="object"&&typeof i.then=="function")return i;if(typeof i=="object"&&i!==null){!r&&i.constructor!==Object&&(!Array.isArray(i)&&i.constructor===Array||(r=i.constructor)),!r&&n&&(r=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(i);var E=this.getKeys(r,i,m),T=n||{};!n&&(this.transformationType===N.PLAIN_TO_CLASS||this.transformationType===N.CLASS_TO_CLASS)&&(m?T=new Map:r?T=new r:T={});for(var S=function(v){if(v==="__proto__"||v==="constructor")return"continue";var u=v,h=v,y=v;if(!g.options.ignoreDecorators&&r){if(g.transformationType===N.PLAIN_TO_CLASS){var A=w.findExposeMetadataByCustomName(r,v);A&&(y=A.propertyName,h=A.propertyName)}else if(g.transformationType===N.CLASS_TO_PLAIN||g.transformationType===N.CLASS_TO_CLASS){var A=w.findExposeMetadata(r,v);A&&A.options&&A.options.name&&(h=A.options.name)}}var _=void 0;g.transformationType===N.PLAIN_TO_CLASS?_=i[u]:i instanceof Map?_=i.get(u):i[u]instanceof Function?_=i[u]():_=i[u];var P=void 0,M=_ instanceof Map;if(r&&m)P=r;else if(r){var b=w.findTypeMetadata(r,y);if(b){var s={newObject:T,object:i,property:y},et=b.typeFunction?b.typeFunction(s):b.reflectedType;b.options&&b.options.discriminator&&b.options.discriminator.property&&b.options.discriminator.subTypes?i[u]instanceof Array?P=b:(g.transformationType===N.PLAIN_TO_CLASS&&(P=b.options.discriminator.subTypes.find(function(C){if(_&&_ instanceof Object&&b.options.discriminator.property in _)return C.name===_[b.options.discriminator.property]}),P===void 0?P=et:P=P.value,b.options.keepDiscriminatorProperty||_&&_ instanceof Object&&b.options.discriminator.property in _&&delete _[b.options.discriminator.property]),g.transformationType===N.CLASS_TO_CLASS&&(P=_.constructor),g.transformationType===N.CLASS_TO_PLAIN&&_&&(_[b.options.discriminator.property]=b.options.discriminator.subTypes.find(function(C){return C.value===_.constructor}).name)):P=et,M=M||b.reflectedType===Map}else if(g.options.targetMaps)g.options.targetMaps.filter(function(C){return C.target===r&&!!C.properties[y]}).forEach(function(C){return P=C.properties[y]});else if(g.options.enableImplicitConversion&&g.transformationType===N.PLAIN_TO_CLASS){var z=Reflect.getMetadata("design:type",r.prototype,y);z&&(P=z)}}var x=Array.isArray(i[u])?g.getReflectedType(r,y):void 0,W=n?n[u]:void 0;if(T.constructor.prototype){var nt=Object.getOwnPropertyDescriptor(T.constructor.prototype,h);if((g.transformationType===N.PLAIN_TO_CLASS||g.transformationType===N.CLASS_TO_CLASS)&&(nt&&!nt.set||T[h]instanceof Function))return"continue"}if(!g.options.enableCircularCheck||!g.isCircular(_)){var q=g.transformationType===N.PLAIN_TO_CLASS?h:v,O=void 0;g.transformationType===N.CLASS_TO_PLAIN?(O=i[q],O=g.applyCustomTransformations(O,r,q,i,g.transformationType),O=i[q]===O?_:O,O=g.transform(W,O,P,x,M,l+1)):_===void 0&&g.options.exposeDefaultValues?O=T[h]:(O=g.transform(W,_,P,x,M,l+1),O=g.applyCustomTransformations(O,r,q,i,g.transformationType)),(O!==void 0||g.options.exposeUnsetFields)&&(T instanceof Map?T.set(h,O):T[h]=O)}else if(g.transformationType===N.CLASS_TO_CLASS){var O=_;O=g.applyCustomTransformations(O,r,v,i,g.transformationType),(O!==void 0||g.options.exposeUnsetFields)&&(T instanceof Map?T.set(h,O):T[h]=O)}},g=this,B=0,k=E;B<k.length;B++){var H=k[B];S(H)}return this.options.enableCircularCheck&&this.recursionStack.delete(i),T}else return i}},a.prototype.applyCustomTransformations=function(n,i,r,d,m){var l=this,p=w.findTransformMetadatas(i,r,this.transformationType);return this.options.version!==void 0&&(p=p.filter(function(c){return c.options?l.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?p=p.filter(function(c){return c.options?l.checkGroups(c.options.groups):!0}):p=p.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),p.forEach(function(c){n=c.transformFn({value:n,key:r,obj:d,type:m,options:l.options})}),n},a.prototype.isCircular=function(n){return this.recursionStack.has(n)},a.prototype.getReflectedType=function(n,i){if(n){var r=w.findTypeMetadata(n,i);return r?r.reflectedType:void 0}},a.prototype.getKeys=function(n,i,r){var d=this,m=w.getStrategy(n);m==="none"&&(m=this.options.strategy||"exposeAll");var l=[];if((m==="exposeAll"||r)&&(i instanceof Map?l=Array.from(i.keys()):l=Object.keys(i)),r)return l;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n){var p=w.getExposedProperties(n,this.transformationType),c=w.getExcludedProperties(n,this.transformationType);l=It(It([],p,!0),c,!0)}if(!this.options.ignoreDecorators&&n){var p=w.getExposedProperties(n,this.transformationType);this.transformationType===N.PLAIN_TO_CLASS&&(p=p.map(function(S){var g=w.findExposeMetadata(n,S);return g&&g.options&&g.options.name?g.options.name:S})),this.options.excludeExtraneousValues?l=p:l=l.concat(p);var E=w.getExcludedProperties(n,this.transformationType);E.length>0&&(l=l.filter(function(S){return!E.includes(S)})),this.options.version!==void 0&&(l=l.filter(function(S){var g=w.findExposeMetadata(n,S);return!g||!g.options?!0:d.checkVersion(g.options.since,g.options.until)})),this.options.groups&&this.options.groups.length?l=l.filter(function(S){var g=w.findExposeMetadata(n,S);return!g||!g.options?!0:d.checkGroups(g.options.groups)}):l=l.filter(function(S){var g=w.findExposeMetadata(n,S);return!g||!g.options||!g.options.groups||!g.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(l=l.filter(function(T){return d.options.excludePrefixes.every(function(S){return T.substr(0,S.length)!==S})})),l=l.filter(function(T,S,g){return g.indexOf(T)===S}),l},a.prototype.checkVersion=function(n,i){var r=!0;return r&&n&&(r=this.options.version>=n),r&&i&&(r=this.options.version<i),r},a.prototype.checkGroups=function(n){return n?this.options.groups.some(function(i){return n.includes(i)}):!0},a})(),Z={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},X=function(){return X=Object.assign||function(a){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(a[d]=n[d])}return a},X.apply(this,arguments)},ot=(function(){function a(){}return a.prototype.instanceToPlain=function(n,i){var r=new K(N.CLASS_TO_PLAIN,X(X({},Z),i));return r.transform(void 0,n,void 0,void 0,void 0,void 0)},a.prototype.classToPlainFromExist=function(n,i,r){var d=new K(N.CLASS_TO_PLAIN,X(X({},Z),r));return d.transform(i,n,void 0,void 0,void 0,void 0)},a.prototype.plainToInstance=function(n,i,r){var d=new K(N.PLAIN_TO_CLASS,X(X({},Z),r));return d.transform(void 0,i,n,void 0,void 0,void 0)},a.prototype.plainToClassFromExist=function(n,i,r){var d=new K(N.PLAIN_TO_CLASS,X(X({},Z),r));return d.transform(n,i,void 0,void 0,void 0,void 0)},a.prototype.instanceToInstance=function(n,i){var r=new K(N.CLASS_TO_CLASS,X(X({},Z),i));return r.transform(void 0,n,void 0,void 0,void 0,void 0)},a.prototype.classToClassFromExist=function(n,i,r){var d=new K(N.CLASS_TO_CLASS,X(X({},Z),r));return d.transform(i,n,void 0,void 0,void 0,void 0)},a.prototype.serialize=function(n,i){return JSON.stringify(this.instanceToPlain(n,i))},a.prototype.deserialize=function(n,i,r){var d=JSON.parse(i);return this.plainToInstance(n,d,r)},a.prototype.deserializeArray=function(n,i,r){var d=JSON.parse(i);return this.plainToInstance(n,d,r)},a})();function _e(a){return a===void 0&&(a={}),function(n,i){w.addExcludeMetadata({target:n instanceof Function?n:n.constructor,propertyName:i,options:a})}}function ye(a){return a===void 0&&(a={}),function(n,i){w.addExposeMetadata({target:n instanceof Function?n:n.constructor,propertyName:i,options:a})}}function Ae(a){return function(n,i,r){var d=new ot,m=r.value;r.value=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var c=m.apply(this,l),E=!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function";return E?c.then(function(T){return d.instanceToInstance(T,a)}):d.instanceToInstance(c,a)}}}function Se(a){return function(n,i,r){var d=new ot,m=r.value;r.value=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var c=m.apply(this,l),E=!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function";return E?c.then(function(T){return d.instanceToPlain(T,a)}):d.instanceToPlain(c,a)}}}function Ne(a,n){return function(i,r,d){var m=new ot,l=d.value;d.value=function(){for(var p=[],c=0;c<arguments.length;c++)p[c]=arguments[c];var E=l.apply(this,p),T=!!E&&(typeof E=="object"||typeof E=="function")&&typeof E.then=="function";return T?E.then(function(S){return m.plainToInstance(a,S,n)}):m.plainToInstance(a,E,n)}}}function ve(a,n){return n===void 0&&(n={}),function(i,r){w.addTransformMetadata({target:i.constructor,propertyName:r,transformFn:a,options:n})}}function Ce(a,n){return n===void 0&&(n={}),function(i,r){var d=Reflect.getMetadata("design:type",i,r);w.addTypeMetadata({target:i.constructor,propertyName:r,reflectedType:d,typeFunction:a,options:n})}}var Y=new ot;function Ie(a,n){return Y.instanceToPlain(a,n)}function Oe(a,n){return Y.instanceToPlain(a,n)}function xe(a,n,i){return Y.classToPlainFromExist(a,n,i)}function be(a,n,i){return Y.plainToInstance(a,n,i)}function De(a,n,i){return Y.plainToInstance(a,n,i)}function Le(a,n,i){return Y.plainToClassFromExist(a,n,i)}function Pe(a,n){return Y.instanceToInstance(a,n)}function Me(a,n,i){return Y.classToClassFromExist(a,n,i)}function Fe(a,n){return Y.serialize(a,n)}function we(a,n,i){return Y.deserialize(a,n,i)}function Be(a,n,i){return Y.deserializeArray(a,n,i)}const Re=Object.freeze(Object.defineProperty({__proto__:null,ClassTransformer:ot,Exclude:_e,Expose:ye,Transform:ve,TransformInstanceToInstance:Ae,TransformInstanceToPlain:Se,TransformPlainToInstance:Ne,get TransformationType(){return N},Type:Ce,classToClassFromExist:Me,classToPlain:Ie,classToPlainFromExist:xe,deserialize:we,deserializeArray:Be,instanceToInstance:Pe,instanceToPlain:Oe,plainToClass:be,plainToClassFromExist:Le,plainToInstance:De,serialize:Fe},Symbol.toStringTag,{value:"Module"})),Ot={"./preload.ts":he,"class-transformer":Re},Ue=[],ke=Kt(async()=>{const a={javascript:at,js:at,typescript:at,ts:at},{getHighlighter:n}=await Dt(async()=>{const{getHighlighter:d}=await import("./slidev/shiki-DhmPQtzo.js");return{getHighlighter:d}},__vite__mapDeps([0,1,2,3,4,5,6])),i=await n(),r=async(d,m,l)=>{try{const p=a[m];if(!p)throw new Error(`Runner for language "${m}" not found`);return await p(d,{options:l,highlight:i,run:async(c,E)=>await r(c,E,l)})}catch(p){return console.error(p),{error:`${p}`}}};for(const d of Ue){const m=await d(a);Object.assign(a,m)}return{highlight:i,run:r}});function je(a){const n=tt([]),i=c=>n.value.push({error:String(c)}),r=(...c)=>n.value.push(c.map(m)),d=Object.assign({},console);d.info=d.log=d.debug=d.warn=d.error=r,d.clear=()=>n.value.length=0;try{const c=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${p(a)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(c)()(d,E=>{const T=Ot[E];if(!T)throw new Error(`Module not found: ${E}.
Available modules: ${Object.keys(Ot).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return T},i)}catch(c){i(c)}function m(c){return typeof c=="string"?{text:c}:{text:l(c),highlightLang:"javascript"}}function l(c){let E="";if(c instanceof Error)E=`Error: ${JSON.stringify(c.message)}`;else if(c==null||typeof c=="symbol")E=String(c);else if(Array.isArray(c))E=`[${c.map(l).join(", ")}]`;else if(c instanceof Set){const T=[...c];E=`Set (${c.size}) {${T.map(l).join(", ")}}`}else if(c instanceof Map){const T=[...c.entries()];E=`Map (${c.size}) {${T.map(([S,g])=>`${l(S)} => ${l(g)}`).join(", ")}}`}else if(c instanceof RegExp)E=c.toString();else if(typeof c=="string")E=JSON.stringify(c);else if(typeof c=="object"){const T=c.constructor?.name??"",S=T&&T==="Object"?"":T;E=(S?`${S}: `:"")+JSON.stringify(c,(B,k)=>k===void 0?"__undefined__":k,2).replace(/"__undefined__"/g,"undefined"),E=String(E)}else E=String(c);return E}function p(c){return c=c.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),c=c.replace("export {};",""),c}return n}let rt;async function at(a){rt??=await Dt(()=>import("./monaco/bundled-types-CaQuhNa9.js").then(i=>i.t),__vite__mapDeps([1,2,3,4])),a=rt.transpileModule(a,{compilerOptions:{module:rt.ModuleKind.ESNext,target:rt.ScriptTarget.ES2022},transformers:{after:[Ge]}}).outputText;const n=/import\s*\((.+)\)/g;return a=a.replace(n,(i,r)=>`__slidev_import(${r})`),je(a)}function Ge(a){const{factory:n}=a,{isImportDeclaration:i,isNamedImports:r,NodeFlags:d}=rt;return m=>{const l=[...m.statements];for(let p=0;p<l.length;p++){const c=l[p];if(!i(c))continue;let E;const T=c.importClause?.namedBindings,S=[];if(c.importClause?.name&&S.push(n.createBindingElement(void 0,n.createIdentifier("default"),c.importClause.name)),T)if(r(T)){for(const B of T.elements)S.push(n.createBindingElement(void 0,B.propertyName,B.name));E=n.createObjectBindingPattern(S)}else E=n.createIdentifier(T.name.text);else E=n.createObjectBindingPattern(S);const g=n.createVariableStatement(void 0,n.createVariableDeclarationList([n.createVariableDeclaration(E,void 0,void 0,n.createAwaitExpression(n.createCallExpression(n.createIdentifier("import"),void 0,[c.moduleSpecifier])))],d.Const));l[p]=g}return n.updateSourceFile(m,l)}}const Xe=xt({__name:"DomElement",props:{element:{}},setup(a){const n=a,i=tt();return Bt(()=>{i.value&&i.value.appendChild(n.element)}),(r,d)=>(F(),U("div",{ref_key:"container",ref:i},null,512))}}),Ye={key:0,class:"text-sm text-center opacity-50"},qe={key:1,class:"text-sm text-center opacity-50"},He={key:2,class:"text-sm text-center opacity-50"},Ve=["innerHTML"],ze={key:1,class:"text-red-500"},We={key:3,class:"output-line"},$e=["innerHTML"],Qe={key:2,class:"separator"},Je={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},sn=xt({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(a,{emit:n}){const i=a,r=n,{isPrintMode:d}=te(),m=Yt(i,"modelValue",r),{$renderContext:l,$clicksContext:p}=ne(),c=Rt(()=>!["slide","presenter"].includes(l.value)),E=d.value?"once":i.autorun,T=tt(E),S=Ut(),g=tt(0),B=tt(),k=tt(i.showOutputAt);if(i.showOutputAt){const v=ee();kt(()=>{const u=p.calculate(i.showOutputAt);u?(p.register(v,u),jt(()=>{k.value=!u.isActive.value})):k.value=!1}),Gt(()=>p.unregister(v))}const H=Zt(200,async()=>{if(c.value)return;const{highlight:v,run:u}=await ke();B.value=v;const h=setTimeout(()=>{T.value=!0},500);S.value=await u(m.value,i.lang,i.runnerOptions??{}),g.value+=1,T.value=!1,clearTimeout(h)});return E==="once"?H():E&&Xt(m,H,{immediate:!0}),(v,u)=>(F(),U(it,null,[qt(At("div",{class:"relative flex flex-col rounded-b border-t border-main",style:$t({height:i.height}),"data-waitfor":".slidev-runner-output"},[c.value?(F(),U("div",Ye,' Code is disabled in the "'+dt(J(l))+'" mode ',1)):T.value?(F(),U("div",qe," Running... ")):S.value?(F(),U("div",{key:`run-${g.value}`,class:"slidev-runner-output"},[(F(!0),U(it,null,St(J(pt)(Wt(S.value)),(h,y)=>(F(),U(it,{key:y},["html"in h?(F(),U("div",{key:0,innerHTML:h.html},null,8,Ve)):"error"in h?(F(),U("div",ze,dt(h.error),1)):"element"in h?(F(),Vt(Xe,{key:2,element:h.element},null,8,["element"])):(F(),U("div",We,[(F(!0),U(it,null,St(J(pt)(h),(A,_)=>(F(),U(it,{key:_},[A.highlightLang&&B.value?(F(),U("span",{key:0,class:"highlighted",innerHTML:B.value(A.text,A.highlightLang)},null,8,$e)):(F(),U("span",{key:1,class:zt(A.class)},dt(A.text),3)),_<J(pt)(h).length-1?(F(),U("span",Qe,",")):yt("v-if",!0)],64))),128))]))],64))),128))])):(F(),U("div",He," Click the play button to run the code "))],4),[[Ht,!k.value]]),J(m).trim()?(F(),U("div",Je,[Qt(ie,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:J(H)},{default:Jt(()=>[...u[0]||(u[0]=[At("div",{class:"i-carbon:play"},null,-1)])]),_:1},8,["onClick"])])):yt("v-if",!0)],64))}});export{sn as default};
